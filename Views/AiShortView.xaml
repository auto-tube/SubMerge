<UserControl x:Class="AutoTubeWpf.Views.AiShortView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:AutoTubeWpf.Views"
             xmlns:viewmodels="clr-namespace:AutoTubeWpf.ViewModels"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="800"
             d:DataContext="{d:DesignInstance Type=viewmodels:AiShortViewModel}">

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Inputs -->
            <RowDefinition Height="*"/>    <!-- Script Area -->
            <RowDefinition Height="Auto"/> <!-- Options -->
            <RowDefinition Height="Auto"/> <!-- Actions -->
        </Grid.RowDefinitions>

        <!-- Input Selection Area -->
        <GroupBox Header="Inputs" Grid.Row="0" Padding="10" Margin="0,0,0,10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Background Video -->
                <TextBlock Grid.Row="0" Grid.Column="0" Text="Background Video:" VerticalAlignment="Center" Margin="0,0,10,5"/>
                <TextBox Grid.Row="0" Grid.Column="1" Text="{Binding BackgroundVideoPath}" IsReadOnly="True" VerticalContentAlignment="Center" Margin="0,0,5,5"/>
                <Button Grid.Row="0" Grid.Column="2" Content="Browse..." Command="{Binding BrowseBackgroundVideoCommand}" Padding="10,5" Margin="0,0,0,5"/>

                <!-- Output Folder -->
                <TextBlock Grid.Row="1" Grid.Column="0" Text="Output Folder:" VerticalAlignment="Center" Margin="0,5,10,0"/>
                <TextBox Grid.Row="1" Grid.Column="1" Text="{Binding OutputFolderPath}" IsReadOnly="True" VerticalContentAlignment="Center" Margin="0,5,5,0"/>
                <Button Grid.Row="1" Grid.Column="2" Content="Browse..." Command="{Binding BrowseOutputFolderCommand}" Padding="10,5" Margin="0,5,0,0"/>
            </Grid>
        </GroupBox>

        <!-- Script Area -->
        <GroupBox Header="Script" Grid.Row="1" Padding="10" Margin="0,0,0,10">
             <Grid>
                 <Grid.RowDefinitions>
                     <RowDefinition Height="Auto"/> <!-- Prompt Area -->
                     <RowDefinition Height="*"/>    <!-- Script Textbox -->
                 </Grid.RowDefinitions>

                 <!-- Script Prompt & Generation -->
                 <Grid Grid.Row="0" Margin="0,0,0,10">
                     <Grid.ColumnDefinitions>
                         <ColumnDefinition Width="*"/>
                         <ColumnDefinition Width="Auto"/>
                     </Grid.ColumnDefinitions>
                     <TextBox Grid.Column="0" Text="{Binding ScriptPrompt, UpdateSourceTrigger=PropertyChanged}" ToolTip="Enter a topic or idea to generate a script" Margin="0,0,5,0" VerticalContentAlignment="Center"/>
                     <Button Grid.Column="1" Content="Generate Script with Gemini" Command="{Binding GenerateScriptAsyncCommand}" Padding="10,5" IsEnabled="{Binding CanGenerateScript}"/>
                 </Grid>

                 <!-- Script Textbox -->
                 <TextBox Grid.Row="1"
                          Text="{Binding ScriptText, UpdateSourceTrigger=PropertyChanged}"
                          AcceptsReturn="True"
                          TextWrapping="Wrap"
                          VerticalScrollBarVisibility="Auto"
                          SpellCheck.IsEnabled="True"
                          Language="en-US"/>
             </Grid>
        </GroupBox>

        <!-- Options Area -->
        <GroupBox Header="Generation Options" Grid.Row="2" Padding="10" Margin="0,0,0,10">
            <StackPanel Orientation="Horizontal">
                <!-- Polly Voice -->
                <TextBlock Text="AI Voice (Polly):" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <ComboBox ItemsSource="{Binding AvailablePollyVoices}"
                          SelectedItem="{Binding SelectedPollyVoice}"
                          MinWidth="120" Margin="0,0,20,0"/>

                <!-- Font Size -->
                <TextBlock Text="Subtitle Font Size:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <!-- TODO: Replace with NumericUpDown -->
                <Slider Minimum="24" Maximum="96" Value="{Binding FontSize}" TickFrequency="4" IsSnapToTickEnabled="True" Width="150" VerticalAlignment="Center"/>
                <TextBlock Text="{Binding FontSize}" VerticalAlignment="Center" Margin="5,0,0,0"/>
            </StackPanel>
        </GroupBox>

        <!-- Action Buttons Area -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Left">
            <Button Content="Generate AI Short"
                    Command="{Binding GenerateAiShortAsyncCommand}"
                    IsEnabled="{Binding CanGenerateAiShort}"
                    Padding="15,8" FontWeight="SemiBold"/>
        </StackPanel>

    </Grid>
</UserControl>